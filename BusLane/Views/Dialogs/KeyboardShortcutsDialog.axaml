<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:BusLane.ViewModels"
             x:Class="BusLane.Views.Dialogs.KeyboardShortcutsDialog"
             x:DataType="vm:MainWindowViewModel">

    <!-- Keyboard Shortcuts Help Dialog -->
    <Border Classes="modal-overlay"
            IsVisible="{Binding ShowKeyboardShortcuts}">
        <Border Classes="modal modal-medium"
                VerticalAlignment="Center"
                HorizontalAlignment="Center">
            <Grid RowDefinitions="Auto,*,Auto">
                <!-- Header -->
                <Grid Grid.Row="0" ColumnDefinitions="*,Auto" Margin="0,0,0,16">
                    <StackPanel Grid.Column="0">
                        <TextBlock Text="Keyboard Shortcuts" Classes="title"/>
                        <TextBlock Text="Press Escape to close" Classes="caption" Margin="0,4,0,0"/>
                    </StackPanel>
                    <Button Grid.Column="1"
                            Classes="icon"
                            Command="{Binding CloseKeyboardShortcutsCommand}"
                            VerticalAlignment="Top">
                        <LucideIcon Kind="X" Size="16"/>
                    </Button>
                </Grid>
                
                <!-- Shortcuts List -->
                <ScrollViewer Grid.Row="1" 
                              VerticalScrollBarVisibility="Auto"
                              HorizontalScrollBarVisibility="Disabled">
                    <ItemsControl ItemsSource="{Binding KeyboardShortcutGroups}">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <StackPanel Margin="0,0,0,20">
                                    <!-- Category Header -->
                                    <TextBlock Text="{Binding Category}" 
                                               FontWeight="SemiBold"
                                               FontSize="14"
                                               Foreground="{DynamicResource AccentBrand}"
                                               Margin="0,0,0,8"/>
                                    
                                    <!-- Shortcuts in Category -->
                                    <ItemsControl ItemsSource="{Binding Shortcuts}">
                                        <ItemsControl.ItemTemplate>
                                            <DataTemplate>
                                                <Grid ColumnDefinitions="*,Auto" 
                                                      Margin="0,4"
                                                      Background="Transparent">
                                                    <TextBlock Grid.Column="0" 
                                                               Text="{Binding Description}"
                                                               VerticalAlignment="Center"/>
                                                    <Border Grid.Column="1"
                                                            Background="{DynamicResource SurfaceSubtle}"
                                                            BorderBrush="{DynamicResource BorderDefault}"
                                                            BorderThickness="1"
                                                            CornerRadius="4"
                                                            Padding="8,4"
                                                            MinWidth="80"
                                                            HorizontalAlignment="Right">
                                                        <TextBlock Text="{Binding DisplayText}"
                                                                   FontFamily="Consolas, Menlo, monospace"
                                                                   FontSize="12"
                                                                   HorizontalAlignment="Center"/>
                                                    </Border>
                                                </Grid>
                                            </DataTemplate>
                                        </ItemsControl.ItemTemplate>
                                    </ItemsControl>
                                </StackPanel>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </ScrollViewer>
                
                <!-- Footer -->
                <Border Grid.Row="2" 
                        BorderThickness="0,1,0,0"
                        BorderBrush="{DynamicResource BorderMuted}"
                        Padding="0,16,0,0"
                        Margin="0,16,0,0">
                    <TextBlock Text="Tip: Most shortcuts use âŒ˜ (Cmd) on macOS or Ctrl on Windows/Linux"
                               Classes="caption"
                               TextWrapping="Wrap"
                               HorizontalAlignment="Center"/>
                </Border>
            </Grid>
        </Border>
    </Border>
</UserControl>

